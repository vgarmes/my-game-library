<%= simple_form_for @game, html: { multipart: true } do |f| %>
<%= f.error_notification %>
<%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

<div class="columns">
  <div class="column is-half">

    <div class="field">
      <div class="control">
        <%= f.input :title, autofocus: true, input_html: { class: "input"}, wrapper: false, label_html: { class: "label" } %>
      </div>
    </div>

    <div class="field">
      <div class="control">
        <label class="label">Platform</label>
        <div class="control has-icons-left">
          <span class="select">
            <%= f.input_field :platform_id, collection: @platforms, prompt: "Select platform" %>
          </span>
          <span class="icon is-small is-left">
            <i class="fa fa-gamepad"></i>
          </span>
        </div>
      </div>
    </div>

    <div class="field pb-3">
      <div class="control">
        <%= f.input :edition, input_html: { class: "input"}, wrapper: false, label_html: { class: "label" } %>
      </div>
    </div>

    <div class="field pb-3">
      <div class="control">
        <%= f.label :release_date %><br />
        <%= f.date_select :release_date, order: [:day, :month, :year] %>
      </div>
    </div>

    <div class="columns pb-3">
      <div class="column">
        <div class="field">
          <div class="control">
            <%= f.radio_button :in_collection, true %>
            <%= f.label :in_collection, 'Physical', :value => true %>
            <%= f.radio_button :in_collection, false %>
            <%= f.label :in_collection, 'Digital', :value => false %>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="field">
          <div class="control">
            <%= f.label :buy_date %><br />
            <%= f.date_select :buy_date, order: [:day, :month, :year] %>
          </div>
        </div>
      </div>
    </div>

    <div class="columns pb-3">
      <div class="column">
        <div class="field">
          <div class="control">
            <label for="game[completed]">
              <%= f.input :completed, required: false, input_html: { class: "checkbox"}, wrapper: false, label: false %>
              Completed?
            </label>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="field">
          <div class="control">
            <%= f.label :completed_date %><br />
            <%= f.date_select :completed_date, order: [:day, :month, :year] %>
          </div>
        </div>
      </div>
    </div>
    
    <div class="columns">
      <div class="column">
        <div class="field">
          <div class="control">
            <%= f.input :comment, input_html: { class: "textarea"}, wrapper: false, label_html: { class: "label" }, placeholder: "Write a comment..." %>
          </div>
        </div>
      </div>
    </div>


  </div>

  <div class="column is-offset-1">
    <div class="columns">
      <div class="field column">
        <div class="control">
          <%= f.input :rating, input_html: { class: "input", id: "rating_value", type: "hidden", value: (@game.rating unless @game.rating.nil?) }, wrapper: false, label_html: { class: "label" } %>
          <%= render 'rating_widget', game: @game %>
        </div>
      </div>
    </div>

    <label class="label">Thumbnail</label>

    <div class="cover-field">
      <span class="item-cover"></span>

      <% if @game.thumbnail.attached? %>
      <%= image_tag @game.thumbnail, alt: "#{@game.title}" %>
      <% end %>
    </div>



    <div class="field">
      <div class="control">
        <%= f.file_field :thumbnail, class: 'form-control', direct_upload: true %>
      </div>
    </div>



  </div>

</div>

<hr />

<%= f.button :submit, class:"button is-dark" %>

<% end %>